!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_visible"};function o(e,t,o){const r=t.id+"-error",n=e.querySelector("#"+r);t.classList.remove(o.inputErrorClass),n.textContent="",n.classList.remove(o.errorClass)}function r(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0}function n(e,t,o){!function(e){return e.some((e=>!e.validity.valid))}(e)?function(e,t){e.classList.remove(t.inactiveButtonClass),e.disabled=!1}(t,o):r(t,o)}var c=e+"8650253b58b46f0f1c06.svg",a=e+"a3ea5deb48e5932f3733.png",i=e+"d38272e02bb4f1ab1c37.svg",l=e+"40608da7369d39bc1077.svg";document.getElementById("header-logo").src=c,document.getElementById("profile-img").src=a,document.getElementById("edit-profile-icon").src=i,document.getElementById("new-profile-icon").src=l;const s=document.querySelector(".profile__edit-btn"),d=document.querySelector(".modal__close-btn"),u=document.querySelector("#edit-modal"),m=(u.querySelector(".modal__save-btn"),u.querySelector("#name")),f=u.querySelector("#description"),p=document.querySelector(".profile__title"),_=document.querySelector(".profile__description"),b=document.querySelector("#card-template"),y=document.querySelector(".cards__list"),v=document.querySelector(".profile__new-btn"),x=document.querySelector("#post-modal"),S=x.querySelector(".modal__close-btn"),q=document.querySelector("#link"),w=document.querySelector("#caption"),h=document.querySelector("#preview-modal"),E=h.querySelector(".modal__img"),g=h.querySelector(".modal__close-btn"),k=h.querySelector(".modal__caption"),L=x.querySelector(".modal__save-btn"),D=Array.from(document.querySelectorAll(".modal")),B=[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Dubai",link:"https://images.unsplash.com/photo-1732530365779-dbf5bdf4bc63?q=80&w=2160&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Tokyo",link:"https://plus.unsplash.com/premium_photo-1661914240950-b0124f20a5c1?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Rome",link:"https://plus.unsplash.com/premium_photo-1675975706513-9daba0ec12a8?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Rio de Janeiro",link:"https://plus.unsplash.com/premium_photo-1671211307997-f4f552b0601c?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Paris",link:"https://plus.unsplash.com/premium_photo-1661919210043-fd847a58522d?q=80&w=2671&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],C=new class{constructor(e){}getInitialCards(){}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}});function A(e){"Escape"==e.key&&D.forEach((e=>{e.classList.contains("modal_opened")&&H(e)}))}function M(e){e.classList.add("modal_opened"),document.addEventListener("keydown",A)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",A)}function G(e){const t=b.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__image"),r=t.querySelector(".card__description"),n=t.querySelector(".card__like-btn"),c=t.querySelector(".card__delete-btn");return o.src=e.link,o.alt=`${e.name} pic`,r.textContent=e.name,n.addEventListener("click",(()=>{n.classList.toggle("card__like-btn_liked")})),c.addEventListener("click",(()=>{t.remove()})),o.addEventListener("click",(()=>{E.src=o.src,E.alt=`${r.textContent} pic`,k.textContent=r.textContent,M(h)})),t}var j;console.log(C),g.addEventListener("click",(()=>{H(h)})),B.forEach((e=>{y.append(G(e))})),D.forEach((e=>{e.addEventListener("click",(t=>{t.target==e&&H(e)}))})),s.addEventListener("click",(()=>{var e,r;M(u),e=u,r=t,[m,f].forEach((t=>{o(e,t,r)})),m.value=p.textContent,f.value=_.textContent})),d.addEventListener("click",(()=>{H(u)})),u.addEventListener("submit",(function(e){e.preventDefault(),H(u)})),v.addEventListener("click",(()=>{M(x)})),S.addEventListener("click",(()=>{H(x)})),x.addEventListener("submit",(function(e){e.preventDefault();const o={link:q.value,name:w.value};var n;B.unshift(o),n=o,y.prepend(G(n)),e.target.reset(),r(L,t),H(x)})),j=t,Array.from(document.querySelectorAll(j.formSelector)).forEach((e=>{!function(e,t){const r=Array.from(e.querySelectorAll(t.inputSelector)),c=e.querySelector(t.submitButtonSelector);n(r,c,t),r.forEach((a=>{a.addEventListener("input",(()=>{!function(e,t,r){t.validity.valid?o(e,t,r):function(e,t,o,r){const n=t.id+"-error",c=e.querySelector("#"+n);t.classList.add(r.inputErrorClass),c.textContent=o,c.classList.add(r.errorClass)}(e,t,t.validationMessage,r)}(e,a,t),n(r,c,t)}))}))}(e,j)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMvRCxJQUNqQkEsRUFBYW9FLGlCQUFpQixTQUFTLE1BbkQzQyxTQUE0QnJFLEVBQWFDLEVBQWNDLEdBQ2hERCxFQUFhZ0IsU0FBU0MsTUFRekJuQixFQUFlQyxFQUFhQyxFQUFjQyxHQXpCOUMsU0FBd0JGLEVBQWFDLEVBQWM0RixFQUFjM0YsR0FDL0QsTUFBTUMsRUFBaUJGLEVBQWFHLEdBQUssU0FDbkNDLEVBQWVMLEVBQVlNLGNBQWMsSUFBTUgsR0FDckRGLEVBQWFNLFVBQVVLLElBQUlWLEVBQU9MLGlCQUNsQ1EsRUFBYUksWUFBY29GLEVBQzNCeEYsRUFBYUUsVUFBVUssSUFBSVYsRUFBT0osV0FDcEMsQ0FZSWdHLENBQ0U5RixFQUNBQyxFQUNBQSxFQUFhOEYsa0JBQ2I3RixFQUtOLENBeUNNOEYsQ0FBbUJoRyxFQUFhQyxFQUFjQyxHQUM5Q1ksRUFBa0JDLEVBQVdKLEVBQWVULEVBQU8sR0FDbkQsR0FFTixDQU1JK0YsQ0FBa0JqRyxFQUFhRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Nwb3RzLXByb2plY3Qvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0Ly4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ0bl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZnVuY3Rpb24gc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50SWQgPSBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiO1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgZXJyb3JFbGVtZW50SWQpO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykge1xuICBjb25zdCBlcnJvckVsZW1lbnRJZCA9IGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCI7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvckVsZW1lbnRJZCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpIHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpIHtcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykge1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBlbmFibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKSB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcilcbiAgKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcbiAgY29uc3QgZm9ybXNMaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcblxuICBmb3Jtc0xpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IHJlc2V0VmFsaWRhdGlvbiwgZGlzYWJsZUJ1dHRvbiwgZW5hYmxlVmFsaWRhdGlvbiwgc2V0dGluZ3MgfTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICByZXNldFZhbGlkYXRpb24sXG4gIGRpc2FibGVCdXR0b24sXG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIHNldHRpbmdzLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcbmltcG9ydCBoZWFkZXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9oZWFkZXJfbG9nby5zdmdcIjtcbmltcG9ydCBwcm9maWxlU3JjIGZyb20gXCIuLi9pbWFnZXMvQXZhdGFyLnBuZ1wiO1xuaW1wb3J0IGVkaXRQcm9maWxlU3JjIGZyb20gXCIuLi9pbWFnZXMvZWRpdC1wcm9maWxlLWljb24uc3ZnXCI7XG5pbXBvcnQgbmV3UHJvZmlsZVNyYyBmcm9tIFwiLi4vaW1hZ2VzL2FkZC1pY29uLnN2Z1wiO1xuXG5jb25zdCBoZWFkZXJMb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXItbG9nb1wiKTtcbmhlYWRlckxvZ28uc3JjID0gaGVhZGVyU3JjO1xuY29uc3QgcHJvZmlsZUltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1pbWdcIik7XG5wcm9maWxlSW1nLnNyYyA9IHByb2ZpbGVTcmM7XG5jb25zdCBlZGl0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1wcm9maWxlLWljb25cIik7XG5lZGl0SWNvbi5zcmMgPSBlZGl0UHJvZmlsZVNyYztcbmNvbnN0IG5ld0ljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9maWxlLWljb25cIik7XG5uZXdJY29uLnNyYyA9IG5ld1Byb2ZpbGVTcmM7XG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcblxuY29uc3QgY2xvc2VQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG5jb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5cbmNvbnN0IHByb2ZpbGVTdWJtaXRCdXR0b24gPVxuICBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idG5cIik7XG5cbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XG5cbmNvbnN0IGpvYklucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IHByb2ZpbGVOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5cbmNvbnN0IHByb2ZpbGVKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuXG5jb25zdCBjYXJkc0xpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuY29uc3QgbmV3UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmV3LWJ0blwiKTtcblxuY29uc3QgbmV3UG9zdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3N0LW1vZGFsXCIpO1xuXG5jb25zdCBjbG9zZVBvc3RCdXR0b24gPSBuZXdQb3N0Rm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG5jb25zdCBsaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpbmtcIik7XG5cbmNvbnN0IGNhcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdGlvblwiKTtcblxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuXG5jb25zdCBwcmV2aWV3SW1hZ2VFbGVtZW50ID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltZ1wiKTtcblxuY29uc3QgcHJldmlld0Nsb3NlQnV0dG9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcblxuY29uc3QgcHJldmlld0NhcHRpb24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuY29uc3QgbmV3UG9zdFN1Ym1pdEJ1dHRvbiA9XG4gIG5ld1Bvc3RGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcblxuY29uc3QgbW9kYWxzTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKSk7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJEdWJhaVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE3MzI1MzAzNjU3NzktZGJmNWJkZjRiYzYzP3E9ODAmdz0yMTYwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUb2t5b1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wbHVzLnVuc3BsYXNoLmNvbS9wcmVtaXVtX3Bob3RvLTE2NjE5MTQyNDA5NTAtYjAxMjRmMjBhNWMxP3E9ODAmdz0yNjcwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSb21lXCIsXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY3NTk3NTcwNjUxMy05ZGFiYTBlYzEyYTg/cT04MCZ3PTI2NzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJpbyBkZSBKYW5laXJvXCIsXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY3MTIxMTMwNzk5Ny1mNGY1NTJiMDYwMWM/cT04MCZ3PTI2NzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlBhcmlzXCIsXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY2MTkxOTIxMDA0My1mZDg0N2E1ODUyMmQ/cT04MCZ3PTI2NzEmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG5dO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJjNTZlMzBkYy0yODgzLTQyNzAtYTU5ZS1iMmY3YmFlOTY5YzZcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuY29uc29sZS5sb2coYXBpKTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PSBcIkVzY2FwZVwiKSB7XG4gICAgbW9kYWxzTGlzdC5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICAgICAgaWYgKG1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgICBoYW5kbGVDbG9zZU1vZGFsKG1vZGFsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmFibGVFc2MoKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVFc2MoKSB7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBlbmFibGVFc2MoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkaXNhYmxlRXNjKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgaGFuZGxlQ2xvc2VNb2RhbChwcm9maWxlRm9ybUVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkcygpIHtcbiAgaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICBjYXJkc0xpc3RFbGVtZW50LmFwcGVuZChnZXRDYXJkRWxlbWVudERhdGEoY2FyZCkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyTmV3Q2FyZChjYXJkKSB7XG4gIGNhcmRzTGlzdEVsZW1lbnQucHJlcGVuZChnZXRDYXJkRWxlbWVudERhdGEoY2FyZCkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVOZXdQb3N0U3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbmV3UG9zdEVsZW1lbnQgPSB7XG4gICAgbGluazogbGlua0lucHV0LnZhbHVlLFxuICAgIG5hbWU6IGNhcHRpb25JbnB1dC52YWx1ZSxcbiAgfTtcbiAgaW5pdGlhbENhcmRzLnVuc2hpZnQobmV3UG9zdEVsZW1lbnQpO1xuICByZW5kZXJOZXdDYXJkKG5ld1Bvc3RFbGVtZW50KTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgaGFuZGxlQ2xvc2VNb2RhbChuZXdQb3N0Rm9ybUVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudERhdGEoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkVGl0bGVFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZXNjcmlwdGlvblwiKTtcbiAgY29uc3QgY2FyZExpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuXG4gIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbGVtZW50LmFsdCA9IGAke2RhdGEubmFtZX0gcGljYDtcbiAgY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gIH0pO1xuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuICBjYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlRWxlbWVudC5zcmMgPSBjYXJkSW1hZ2VFbGVtZW50LnNyYztcbiAgICBwcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGAke2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnR9IHBpY2A7XG4gICAgcHJldmlld0NhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50O1xuICAgIGhhbmRsZU9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHNldE1vZGFsQ2xvc2VMaXN0ZW5lcnMoKSB7XG4gIG1vZGFsc0xpc3QuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT0gbW9kYWwpIHtcbiAgICAgICAgaGFuZGxlQ2xvc2VNb2RhbChtb2RhbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5wcmV2aWV3Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlQ2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xufSk7XG5cbnJlbmRlckNhcmRzKCk7XG5zZXRNb2RhbENsb3NlTGlzdGVuZXJzKCk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlT3Blbk1vZGFsKHByb2ZpbGVGb3JtRWxlbWVudCk7XG4gIHJlc2V0VmFsaWRhdGlvbihwcm9maWxlRm9ybUVsZW1lbnQsIFtuYW1lSW5wdXQsIGpvYklucHV0XSwgc2V0dGluZ3MpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZUpvYkVsZW1lbnQudGV4dENvbnRlbnQ7XG59KTtcblxuY2xvc2VQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGhhbmRsZUNsb3NlTW9kYWwocHJvZmlsZUZvcm1FbGVtZW50KTtcbn0pO1xuXG5wcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5cbm5ld1Byb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlT3Blbk1vZGFsKG5ld1Bvc3RGb3JtRWxlbWVudCk7XG59KTtcblxuY2xvc2VQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGhhbmRsZUNsb3NlTW9kYWwobmV3UG9zdEZvcm1FbGVtZW50KTtcbn0pO1xuXG5uZXdQb3N0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0U3VibWl0KTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIC8vIC4uLlxuICB9XG5cbiAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJjb25maWciLCJlcnJvckVsZW1lbnRJZCIsImlkIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiZGlzYWJsZUJ1dHRvbiIsImJ1dHRvbkVsZW1lbnQiLCJhZGQiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJlbmFibGVCdXR0b24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3JjIiwiaGVhZGVyU3JjIiwicHJvZmlsZVNyYyIsImVkaXRQcm9maWxlU3JjIiwibmV3UHJvZmlsZVNyYyIsImVkaXRCdXR0b24iLCJjbG9zZVByb2ZpbGVCdXR0b24iLCJwcm9maWxlRm9ybUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVKb2JFbGVtZW50IiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0RWxlbWVudCIsIm5ld1Byb2ZpbGVCdXR0b24iLCJuZXdQb3N0Rm9ybUVsZW1lbnQiLCJjbG9zZVBvc3RCdXR0b24iLCJsaW5rSW5wdXQiLCJjYXB0aW9uSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2VFbGVtZW50IiwicHJldmlld0Nsb3NlQnV0dG9uIiwicHJldmlld0NhcHRpb24iLCJuZXdQb3N0U3VibWl0QnV0dG9uIiwibW9kYWxzTGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbml0aWFsQ2FyZHMiLCJuYW1lIiwibGluayIsImFwaSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsImdldEluaXRpYWxDYXJkcyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImhhbmRsZUVzY2FwZSIsImV2dCIsImtleSIsImZvckVhY2giLCJtb2RhbCIsImNvbnRhaW5zIiwiaGFuZGxlQ2xvc2VNb2RhbCIsImhhbmRsZU9wZW5Nb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZEVsZW1lbnREYXRhIiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZUVsZW1lbnQiLCJjYXJkVGl0bGVFbGVtZW50IiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwiYWx0IiwidG9nZ2xlIiwiY29uc29sZSIsImxvZyIsImNhcmQiLCJhcHBlbmQiLCJ0YXJnZXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwibmV3UG9zdEVsZW1lbnQiLCJ1bnNoaWZ0IiwicHJlcGVuZCIsInJlc2V0IiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==