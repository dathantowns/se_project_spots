!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_visible"};function o(e,t,o){const r=t.id+"-error",n=e.querySelector("#"+r);t.classList.remove(o.inputErrorClass),n.textContent="",n.classList.remove(o.errorClass)}function r(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0}function n(e,t,o){!function(e){return e.some((e=>!e.validity.valid))}(e)?function(e,t){e.classList.remove(t.inactiveButtonClass),e.disabled=!1}(t,o):r(t,o)}var a=e+"8650253b58b46f0f1c06.svg",c=e+"a3ea5deb48e5932f3733.png",i=e+"d38272e02bb4f1ab1c37.svg",l=e+"40608da7369d39bc1077.svg";document.getElementById("header-logo").src=a,document.getElementById("profile-img").src=c,document.getElementById("edit-profile-icon").src=i,document.getElementById("new-profile-icon").src=l;const s=document.querySelector(".profile__edit-btn"),d=document.querySelector(".modal__close-btn"),u=document.querySelector("#edit-modal"),m=(u.querySelector(".modal__save-btn"),u.querySelector("#name")),f=u.querySelector("#description"),p=document.querySelector(".profile__title"),_=document.querySelector(".profile__description"),b=document.querySelector("#card-template"),v=document.querySelector(".cards__list"),y=document.querySelector(".profile__new-btn"),x=document.querySelector("#post-modal"),S=x.querySelector(".modal__close-btn"),q=document.querySelector("#link"),h=document.querySelector("#caption"),w=document.querySelector("#preview-modal"),E=w.querySelector(".modal__img"),g=w.querySelector(".modal__close-btn"),k=w.querySelector(".modal__caption"),L=x.querySelector(".modal__save-btn"),D=Array.from(document.querySelectorAll(".modal")),B=[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Dubai",link:"https://images.unsplash.com/photo-1732530365779-dbf5bdf4bc63?q=80&w=2160&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Tokyo",link:"https://plus.unsplash.com/premium_photo-1661914240950-b0124f20a5c1?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Rome",link:"https://plus.unsplash.com/premium_photo-1675975706513-9daba0ec12a8?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Rio de Janeiro",link:"https://plus.unsplash.com/premium_photo-1671211307997-f4f552b0601c?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Paris",link:"https://plus.unsplash.com/premium_photo-1661919210043-fd847a58522d?q=80&w=2671&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],C=new class{constructor(e){}getInitialCards(){fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"3a6ee566-6806-49c1-b2d5-f8c291a34de7"}}).then((e=>e.json()))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6","Content-Type":"application/json"}});function A(e){"Escape"==e.key&&D.forEach((e=>{e.classList.contains("modal_opened")&&H(e)}))}function M(e){e.classList.add("modal_opened"),document.addEventListener("keydown",A)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",A)}function G(e){const t=b.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__image"),r=t.querySelector(".card__description"),n=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.src=e.link,o.alt=`${e.name} pic`,r.textContent=e.name,n.addEventListener("click",(()=>{n.classList.toggle("card__like-btn_liked")})),a.addEventListener("click",(()=>{t.remove()})),o.addEventListener("click",(()=>{E.src=o.src,E.alt=`${r.textContent} pic`,k.textContent=r.textContent,M(w)})),t}var j;console.log(C.getInitialCards()),g.addEventListener("click",(()=>{H(w)})),B.forEach((e=>{v.append(G(e))})),D.forEach((e=>{e.addEventListener("click",(t=>{t.target==e&&H(e)}))})),s.addEventListener("click",(()=>{var e,r;M(u),e=u,r=t,[m,f].forEach((t=>{o(e,t,r)})),m.value=p.textContent,f.value=_.textContent})),d.addEventListener("click",(()=>{H(u)})),u.addEventListener("submit",(function(e){e.preventDefault(),H(u)})),y.addEventListener("click",(()=>{M(x)})),S.addEventListener("click",(()=>{H(x)})),x.addEventListener("submit",(function(e){e.preventDefault();const o={link:q.value,name:h.value};var n;B.unshift(o),n=o,v.prepend(G(n)),e.target.reset(),r(L,t),H(x)})),j=t,Array.from(document.querySelectorAll(j.formSelector)).forEach((e=>{!function(e,t){const r=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);n(r,a,t),r.forEach((c=>{c.addEventListener("input",(()=>{!function(e,t,r){t.validity.valid?o(e,t,r):function(e,t,o,r){const n=t.id+"-error",a=e.querySelector("#"+n);t.classList.add(r.inputErrorClass),a.textContent=o,a.classList.add(r.errorClass)}(e,t,t.validationMessage,r)}(e,c,t),n(r,a,t)}))}))}(e,j)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFFaENpQixFQUFnQlgsRUFBWU0sY0FBY0osRUFBT1Asc0JBRXZEbUIsRUFBa0JDLEVBQVdKLEVBQWVULEdBQzVDYSxFQUFVcUQsU0FBU25FLElBQ2pCQSxFQUFhd0UsaUJBQWlCLFNBQVMsTUFuRDNDLFNBQTRCekUsRUFBYUMsRUFBY0MsR0FDaERELEVBQWFnQixTQUFTQyxNQVF6Qm5CLEVBQWVDLEVBQWFDLEVBQWNDLEdBekI5QyxTQUF3QkYsRUFBYUMsRUFBY2dHLEVBQWMvRixHQUMvRCxNQUFNQyxFQUFpQkYsRUFBYUcsR0FBSyxTQUNuQ0MsRUFBZUwsRUFBWU0sY0FBYyxJQUFNSCxHQUNyREYsRUFBYU0sVUFBVUssSUFBSVYsRUFBT0wsaUJBQ2xDUSxFQUFhSSxZQUFjd0YsRUFDM0I1RixFQUFhRSxVQUFVSyxJQUFJVixFQUFPSixXQUNwQyxDQVlJb0csQ0FDRWxHLEVBQ0FDLEVBQ0FBLEVBQWFrRyxrQkFDYmpHLEVBS04sQ0F5Q01rRyxDQUFtQnBHLEVBQWFDLEVBQWNDLEdBQzlDWSxFQUFrQkMsRUFBV0osRUFBZVQsRUFBTyxHQUNuRCxHQUVOLENBTUltRyxDQUFrQnJHLEVBQWFFLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Nwb3RzLXByb2plY3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0Ly4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3Nwb3RzLXByb2plY3QvLi9zcmMvdXRpbHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIGNvbmZpZykge1xuICBjb25zdCBlcnJvckVsZW1lbnRJZCA9IGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCI7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvckVsZW1lbnRJZCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSB7XG4gIGNvbnN0IGVycm9yRWxlbWVudElkID0gaW5wdXRFbGVtZW50LmlkICsgXCItZXJyb3JcIjtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGVycm9yRWxlbWVudElkKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKFxuICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBjb25maWdcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykge1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKSB7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXNldFZhbGlkYXRpb24oZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgY29uZmlnKSB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpIHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKGNvbmZpZykge1xuICBjb25zdCBmb3Jtc0xpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuXG4gIGZvcm1zTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn1cblxuZXhwb3J0IHsgcmVzZXRWYWxpZGF0aW9uLCBkaXNhYmxlQnV0dG9uLCBlbmFibGVWYWxpZGF0aW9uLCBzZXR0aW5ncyB9O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuaW1wb3J0IGhlYWRlclNyYyBmcm9tIFwiLi4vaW1hZ2VzL2hlYWRlcl9sb2dvLnN2Z1wiO1xuaW1wb3J0IHByb2ZpbGVTcmMgZnJvbSBcIi4uL2ltYWdlcy9BdmF0YXIucG5nXCI7XG5pbXBvcnQgZWRpdFByb2ZpbGVTcmMgZnJvbSBcIi4uL2ltYWdlcy9lZGl0LXByb2ZpbGUtaWNvbi5zdmdcIjtcbmltcG9ydCBuZXdQcm9maWxlU3JjIGZyb20gXCIuLi9pbWFnZXMvYWRkLWljb24uc3ZnXCI7XG5cbmNvbnN0IGhlYWRlckxvZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlYWRlci1sb2dvXCIpO1xuaGVhZGVyTG9nby5zcmMgPSBoZWFkZXJTcmM7XG5jb25zdCBwcm9maWxlSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWltZ1wiKTtcbnByb2ZpbGVJbWcuc3JjID0gcHJvZmlsZVNyYztcbmNvbnN0IGVkaXRJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXByb2ZpbGUtaWNvblwiKTtcbmVkaXRJY29uLnNyYyA9IGVkaXRQcm9maWxlU3JjO1xuY29uc3QgbmV3SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXByb2ZpbGUtaWNvblwiKTtcbm5ld0ljb24uc3JjID0gbmV3UHJvZmlsZVNyYztcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuXG5jb25zdCBjbG9zZVByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5cbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcblxuY29uc3QgcHJvZmlsZVN1Ym1pdEJ1dHRvbiA9XG4gIHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcblxuY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcblxuY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcblxuY29uc3QgcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcblxuY29uc3QgcHJvZmlsZUpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5cbmNvbnN0IGNhcmRzTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5jb25zdCBuZXdQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctYnRuXCIpO1xuXG5jb25zdCBuZXdQb3N0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bvc3QtbW9kYWxcIik7XG5cbmNvbnN0IGNsb3NlUG9zdEJ1dHRvbiA9IG5ld1Bvc3RGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5cbmNvbnN0IGxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlua1wiKTtcblxuY29uc3QgY2FwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXB0aW9uXCIpO1xuXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5cbmNvbnN0IHByZXZpZXdJbWFnZUVsZW1lbnQgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1nXCIpO1xuXG5jb25zdCBwcmV2aWV3Q2xvc2VCdXR0b24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG5jb25zdCBwcmV2aWV3Q2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG5jb25zdCBuZXdQb3N0U3VibWl0QnV0dG9uID1cbiAgbmV3UG9zdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnRuXCIpO1xuXG5jb25zdCBtb2RhbHNMaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpKTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJHb2xkZW4gR2F0ZSBCcmlkZ2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkR1YmFpXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTczMjUzMDM2NTc3OS1kYmY1YmRmNGJjNjM/cT04MCZ3PTIxNjAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlRva3lvXCIsXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY2MTkxNDI0MDk1MC1iMDEyNGYyMGE1YzE/cT04MCZ3PTI2NzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJvbWVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNjc1OTc1NzA2NTEzLTlkYWJhMGVjMTJhOD9xPTgwJnc9MjY3MCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmlvIGRlIEphbmVpcm9cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNjcxMjExMzA3OTk3LWY0ZjU1MmIwNjAxYz9xPTgwJnc9MjY3MCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGFyaXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNjYxOTE5MjEwMDQzLWZkODQ3YTU4NTIyZD9xPTgwJnc9MjY3MSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbl07XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImM1NmUzMGRjLTI4ODMtNDI3MC1hNTllLWIyZjdiYWU5NjljNlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5jb25zb2xlLmxvZyhhcGkuZ2V0SW5pdGlhbENhcmRzKCkpO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09IFwiRXNjYXBlXCIpIHtcbiAgICBtb2RhbHNMaXN0LmZvckVhY2goKG1vZGFsKSA9PiB7XG4gICAgICBpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIGhhbmRsZUNsb3NlTW9kYWwobW9kYWwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuYWJsZUVzYygpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZUVzYygpIHtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGVuYWJsZUVzYygpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRpc2FibGVFc2MoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBoYW5kbGVDbG9zZU1vZGFsKHByb2ZpbGVGb3JtRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmRzKCkge1xuICBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgIGNhcmRzTGlzdEVsZW1lbnQuYXBwZW5kKGdldENhcmRFbGVtZW50RGF0YShjYXJkKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJOZXdDYXJkKGNhcmQpIHtcbiAgY2FyZHNMaXN0RWxlbWVudC5wcmVwZW5kKGdldENhcmRFbGVtZW50RGF0YShjYXJkKSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBuZXdQb3N0RWxlbWVudCA9IHtcbiAgICBsaW5rOiBsaW5rSW5wdXQudmFsdWUsXG4gICAgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLFxuICB9O1xuICBpbml0aWFsQ2FyZHMudW5zaGlmdChuZXdQb3N0RWxlbWVudCk7XG4gIHJlbmRlck5ld0NhcmQobmV3UG9zdEVsZW1lbnQpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gIGRpc2FibGVCdXR0b24obmV3UG9zdFN1Ym1pdEJ1dHRvbiwgc2V0dGluZ3MpO1xuICBoYW5kbGVDbG9zZU1vZGFsKG5ld1Bvc3RGb3JtRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50RGF0YShkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRUaXRsZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgY2FyZEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsZW1lbnQuYWx0ID0gYCR7ZGF0YS5uYW1lfSBwaWNgO1xuICBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfSk7XG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfSk7XG4gIGNhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGNhcmRJbWFnZUVsZW1lbnQuc3JjO1xuICAgIHByZXZpZXdJbWFnZUVsZW1lbnQuYWx0ID0gYCR7Y2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudH0gcGljYDtcbiAgICBwcmV2aWV3Q2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgaGFuZGxlT3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gc2V0TW9kYWxDbG9zZUxpc3RlbmVycygpIHtcbiAgbW9kYWxzTGlzdC5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PSBtb2RhbCkge1xuICAgICAgICBoYW5kbGVDbG9zZU1vZGFsKG1vZGFsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbnByZXZpZXdDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBoYW5kbGVDbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XG59KTtcblxucmVuZGVyQ2FyZHMoKTtcbnNldE1vZGFsQ2xvc2VMaXN0ZW5lcnMoKTtcblxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBoYW5kbGVPcGVuTW9kYWwocHJvZmlsZUZvcm1FbGVtZW50KTtcbiAgcmVzZXRWYWxpZGF0aW9uKHByb2ZpbGVGb3JtRWxlbWVudCwgW25hbWVJbnB1dCwgam9iSW5wdXRdLCBzZXR0aW5ncyk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgam9iSW5wdXQudmFsdWUgPSBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudDtcbn0pO1xuXG5jbG9zZVByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlQ2xvc2VNb2RhbChwcm9maWxlRm9ybUVsZW1lbnQpO1xufSk7XG5cbnByb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxubmV3UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBoYW5kbGVPcGVuTW9kYWwobmV3UG9zdEZvcm1FbGVtZW50KTtcbn0pO1xuXG5jbG9zZVBvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlQ2xvc2VNb2RhbChuZXdQb3N0Rm9ybUVsZW1lbnQpO1xufSk7XG5cbm5ld1Bvc3RGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RTdWJtaXQpO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvLyBjb25zdHJ1Y3RvciBib2R5XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgZmV0Y2goXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkc1wiLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiM2E2ZWU1NjYtNjgwNi00OWMxLWIyZDUtZjhjMjkxYTM0ZGU3XCIsXG4gICAgICB9LFxuICAgIH0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSk7XG4gIH1cblxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yRWxlbWVudElkIiwiaWQiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJkaXNhYmxlQnV0dG9uIiwiYnV0dG9uRWxlbWVudCIsImFkZCIsImRpc2FibGVkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImVuYWJsZUJ1dHRvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzcmMiLCJoZWFkZXJTcmMiLCJwcm9maWxlU3JjIiwiZWRpdFByb2ZpbGVTcmMiLCJuZXdQcm9maWxlU3JjIiwiZWRpdEJ1dHRvbiIsImNsb3NlUHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVGb3JtRWxlbWVudCIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicHJvZmlsZU5hbWVFbGVtZW50IiwicHJvZmlsZUpvYkVsZW1lbnQiLCJjYXJkVGVtcGxhdGUiLCJjYXJkc0xpc3RFbGVtZW50IiwibmV3UHJvZmlsZUJ1dHRvbiIsIm5ld1Bvc3RGb3JtRWxlbWVudCIsImNsb3NlUG9zdEJ1dHRvbiIsImxpbmtJbnB1dCIsImNhcHRpb25JbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdJbWFnZUVsZW1lbnQiLCJwcmV2aWV3Q2xvc2VCdXR0b24iLCJwcmV2aWV3Q2FwdGlvbiIsIm5ld1Bvc3RTdWJtaXRCdXR0b24iLCJtb2RhbHNMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImluaXRpYWxDYXJkcyIsIm5hbWUiLCJsaW5rIiwiYXBpIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJqc29uIiwiYmFzZVVybCIsImhhbmRsZUVzY2FwZSIsImV2dCIsImtleSIsImZvckVhY2giLCJtb2RhbCIsImNvbnRhaW5zIiwiaGFuZGxlQ2xvc2VNb2RhbCIsImhhbmRsZU9wZW5Nb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZEVsZW1lbnREYXRhIiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZUVsZW1lbnQiLCJjYXJkVGl0bGVFbGVtZW50IiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwiYWx0IiwidG9nZ2xlIiwiY29uc29sZSIsImxvZyIsImNhcmQiLCJhcHBlbmQiLCJ0YXJnZXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwibmV3UG9zdEVsZW1lbnQiLCJ1bnNoaWZ0IiwicHJlcGVuZCIsInJlc2V0IiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==