!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_visible"};function r(e,t,r){const n=t.id+"-error",o=e.querySelector("#"+n);t.classList.remove(r.inputErrorClass),o.textContent="",o.classList.remove(r.errorClass)}function n(e,t){e.classList.add(t.inactiveButtonClass),e.disabled=!0}function o(e,t,r){!function(e){return e.some((e=>!e.validity.valid))}(e)?function(e,t){e.classList.remove(t.inactiveButtonClass),e.disabled=!1}(t,r):n(t,r)}var s=e+"8650253b58b46f0f1c06.svg",a=e+"d38272e02bb4f1ab1c37.svg",c=e+"40608da7369d39bc1077.svg",i=e+"d73f076c46eb5467f5fc.svg";function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";t.textContent=e?n:r}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.preventDefault();const n=t.submitter,o=n.textContent;d(!0,n,o,r),e().then((()=>{t.target.reset()})).catch(console.error).finally((()=>{d(!1,n,o)}))}document.getElementById("header-logo").src=s;const u=document.getElementById("profile-img");document.getElementById("edit-profile-icon").src=a,document.getElementById("new-profile-icon").src=c;const m=document.querySelector(".profile__edit-btn");document.getElementById("edit-avatar-icon").src=i;const h=document.querySelector(".profile__edit-avatar-btn"),_=document.querySelector("#edit-modal"),f=_.querySelector("#name"),v=_.querySelector("#description"),p=document.querySelector(".profile__title"),y=document.querySelector(".profile__description"),b=document.querySelector("#card-template"),S=document.querySelector(".cards__list"),k=document.querySelector(".profile__new-btn"),E=document.querySelector("#post-modal"),q=document.querySelector("#link"),C=document.querySelector("#caption"),L=document.querySelector("#preview-modal"),g=L.querySelector(".modal__img"),U=L.querySelector(".modal__caption"),x=document.querySelector("#delete-modal"),$=document.forms["delete-form"],A=x.querySelector(".modal__delete-btn_cancel"),I=document.querySelector("#avatar-modal"),B=document.forms["avatar-form"],R=I.querySelector("#avatar"),w=B.querySelector(".modal__save-btn");let T,N;const P=E.querySelector(".modal__save-btn"),D=Array.from(document.querySelectorAll(".modal")),O=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}_checkResponse(e){if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse)}postNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}editUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3a6ee566-6806-49c1-b2d5-f8c291a34de7","Content-Type":"application/json"}});function j(e){"Escape"==e.key&&D.forEach((e=>{e.classList.contains("modal_opened")&&H(e)}))}function J(e){e.classList.add("modal_opened"),document.addEventListener("keydown",j)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",j)}function z(e){const t=b.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__image"),n=t.querySelector(".card__description"),o=t.querySelector(".card__like-btn"),s=t.querySelector(".card__delete-btn");return r.src=e.link,r.alt=`${e.name} pic`,n.textContent=e.name,e.isLiked&&o.classList.add("card__like-btn_liked"),o.addEventListener("click",(()=>{!function(e,t,r){T=e,N=r._id;let n=t;n.classList.contains("card__like-btn_liked")?O.removeLike(N).then((()=>{n.classList.remove("card__like-btn_liked")})).catch((e=>console.error(e))):O.likeCard(N).then((()=>{n.classList.add("card__like-btn_liked")})).catch((e=>console.error(e)))}(t,o,e)})),s.addEventListener("click",(()=>function(e,t){T=e,N=t._id,J(x)}(t,e))),r.addEventListener("click",(()=>{g.src=r.src,g.alt=`${n.textContent} pic`,U.textContent=n.textContent,J(L)})),t}var M;O.getAppInfo().then((e=>{let[t,r]=e;t.forEach((e=>{S.append(z(e))})),p.textContent=r.name,y.textContent=r.about,u.src=r.avatar})).catch((e=>{console.error(e)})),D.forEach((e=>{e.addEventListener("click",(t=>{t.target==e&&H(e)}))})),document.querySelectorAll(".modal__close-btn").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>H(t)))})),h.addEventListener("click",(()=>{J(I)})),m.addEventListener("click",(()=>{var e,n;J(_),e=_,n=t,[f,v].forEach((t=>{r(e,t,n)})),f.value=p.textContent,v.value=y.textContent})),_.addEventListener("submit",(function(e){l((function(){return O.editUserInfo({name:f.value,about:v.value}).then((e=>{p.textContent=e.name,y.textContent=e.about,H(_)}))}),e)})),k.addEventListener("click",(()=>{J(E)})),A.addEventListener("click",(()=>{H(x)})),E.addEventListener("submit",(function(e){l((function(){return O.postNewCard(C.value,q.value).then((r=>{const o=z(r);S.prepend(o),e.target.reset(),n(P,t),H(E)}))}),e)})),$.addEventListener("submit",(function(e){l((function(){return O.removeCard(N).then((()=>{T.remove(),H(x)}))}),e,"Deleting...")})),B.addEventListener("submit",(function(e){l((function(){return O.editUserAvatar(R.value).then((r=>{u.src=r.avatar,H(I),e.target.reset(),n(w,t)}))}),e)})),M=t,Array.from(document.querySelectorAll(M.formSelector)).forEach((e=>{!function(e,t){const n=Array.from(e.querySelectorAll(t.inputSelector)),s=e.querySelector(t.submitButtonSelector);o(n,s,t),n.forEach((a=>{a.addEventListener("input",(()=>{!function(e,t,n){t.validity.valid?r(e,t,n):function(e,t,r,n){const o=t.id+"-error",s=e.querySelector("#"+o);t.classList.add(n.inputErrorClass),s.textContent=r,s.classList.add(n.errorClass)}(e,t,t.validationMessage,n)}(e,a,t),o(n,s,t)}))}))}(e,M)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCL0UsRUFBT1QsZUFFcERpSSxTQUFTMUgsS0FsQnJCLFNBQTJCQSxFQUFhRSxHQUN0QyxNQUFNYSxFQUFZZ0UsTUFBTUMsS0FDdEJoRixFQUFZaUYsaUJBQWlCL0UsRUFBT1IsZ0JBRWhDaUIsRUFBZ0JYLEVBQVlNLGNBQWNKLEVBQU9QLHNCQUV2RG1CLEVBQWtCQyxFQUFXSixFQUFlVCxHQUM1Q2EsRUFBVTJHLFNBQVN6SCxJQUNqQkEsRUFBYThILGlCQUFpQixTQUFTLE1BbkQzQyxTQUE0Qi9ILEVBQWFDLEVBQWNDLEdBQ2hERCxFQUFhZ0IsU0FBU0MsTUFRekJuQixFQUFlQyxFQUFhQyxFQUFjQyxHQXpCOUMsU0FBd0JGLEVBQWFDLEVBQWMwSixFQUFjekosR0FDL0QsTUFBTUMsRUFBaUJGLEVBQWFHLEdBQUssU0FDbkNDLEVBQWVMLEVBQVlNLGNBQWMsSUFBTUgsR0FDckRGLEVBQWFNLFVBQVVLLElBQUlWLEVBQU9MLGlCQUNsQ1EsRUFBYUksWUFBY2tKLEVBQzNCdEosRUFBYUUsVUFBVUssSUFBSVYsRUFBT0osV0FDcEMsQ0FZSThKLENBQ0U1SixFQUNBQyxFQUNBQSxFQUFhNEosa0JBQ2IzSixFQUtOLENBeUNNNEosQ0FBbUI5SixFQUFhQyxFQUFjQyxHQUM5Q1ksRUFBa0JDLEVBQVdKLEVBQWVULEVBQU8sR0FDbkQsR0FFTixDQU1JNkosQ0FBa0IvSixFQUFhRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Nwb3RzLXByb2plY3Qvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc3BvdHMtcHJvamVjdC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9zcG90cy1wcm9qZWN0Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3Nwb3RzLXByb2plY3QvLi9zcmMvdXRpbHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIGNvbmZpZykge1xuICBjb25zdCBlcnJvckVsZW1lbnRJZCA9IGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCI7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvckVsZW1lbnRJZCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSB7XG4gIGNvbnN0IGVycm9yRWxlbWVudElkID0gaW5wdXRFbGVtZW50LmlkICsgXCItZXJyb3JcIjtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGVycm9yRWxlbWVudElkKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKFxuICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBjb25maWdcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykge1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKSB7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXNldFZhbGlkYXRpb24oZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgY29uZmlnKSB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpIHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKGNvbmZpZykge1xuICBjb25zdCBmb3Jtc0xpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuXG4gIGZvcm1zTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn1cblxuZXhwb3J0IHsgcmVzZXRWYWxpZGF0aW9uLCBkaXNhYmxlQnV0dG9uLCBlbmFibGVWYWxpZGF0aW9uLCBzZXR0aW5ncyB9O1xuIiwiZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhcbiAgaXNMb2FkaW5nLFxuICBidXR0b24sXG4gIGJ1dHRvblRleHQgPSBcIlNhdmVcIixcbiAgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiXG4pIHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KHJlcXVlc3QsIGV2dCwgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBldnQuc3VibWl0dGVyO1xuICBjb25zdCBpbml0aWFsVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBzdWJtaXRCdXR0b24sIGluaXRpYWxUZXh0LCBsb2FkaW5nVGV4dCk7XG5cbiAgcmVxdWVzdCgpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgc3VibWl0QnV0dG9uLCBpbml0aWFsVGV4dCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IHJlbmRlckxvYWRpbmcsIGhhbmRsZVN1Ym1pdCB9O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuaW1wb3J0IGhlYWRlclNyYyBmcm9tIFwiLi4vaW1hZ2VzL2hlYWRlcl9sb2dvLnN2Z1wiO1xuaW1wb3J0IGVkaXRQcm9maWxlU3JjIGZyb20gXCIuLi9pbWFnZXMvZWRpdC1wcm9maWxlLWljb24uc3ZnXCI7XG5pbXBvcnQgbmV3UHJvZmlsZVNyYyBmcm9tIFwiLi4vaW1hZ2VzL2FkZC1pY29uLnN2Z1wiO1xuaW1wb3J0IGVkaXRBdmF0YXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9Hcm91cDIuc3ZnXCI7XG5pbXBvcnQgeyByZW5kZXJMb2FkaW5nLCBoYW5kbGVTdWJtaXQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcblxuY29uc3QgaGVhZGVyTG9nbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyLWxvZ29cIik7XG5oZWFkZXJMb2dvLnNyYyA9IGhlYWRlclNyYztcbmNvbnN0IHByb2ZpbGVJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtaW1nXCIpO1xuY29uc3QgZWRpdEljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtcHJvZmlsZS1pY29uXCIpO1xuZWRpdEljb24uc3JjID0gZWRpdFByb2ZpbGVTcmM7XG5jb25zdCBuZXdJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctcHJvZmlsZS1pY29uXCIpO1xubmV3SWNvbi5zcmMgPSBuZXdQcm9maWxlU3JjO1xuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBlZGl0QXZhdGFySWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1hdmF0YXItaWNvblwiKTtcbmVkaXRBdmF0YXJJY29uLnNyYyA9IGVkaXRBdmF0YXJTcmM7XG5cbmNvbnN0IGVkaXRBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ0blwiKTtcblxuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuXG5jb25zdCBuYW1lSW5wdXQgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuXG5jb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuXG5jb25zdCBwcm9maWxlSm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcblxuY29uc3QgY2FyZHNMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmNvbnN0IG5ld1Byb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1idG5cIik7XG5cbmNvbnN0IG5ld1Bvc3RGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9zdC1tb2RhbFwiKTtcblxuY29uc3QgbGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaW5rXCIpO1xuXG5jb25zdCBjYXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcHRpb25cIik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcblxuY29uc3QgcHJldmlld0ltYWdlRWxlbWVudCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWdcIik7XG5cbmNvbnN0IHByZXZpZXdDYXB0aW9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XG5cbmNvbnN0IGRlbGV0ZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImRlbGV0ZS1mb3JtXCJdO1xuXG5jb25zdCBjYW5jZWxCdXR0b24gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19kZWxldGUtYnRuX2NhbmNlbFwiKTtcblxuY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1tb2RhbFwiKTtcblxuY29uc3QgYXZhdGFyRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImF2YXRhci1mb3JtXCJdO1xuXG5jb25zdCBhdmF0YXJJbnB1dCA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyXCIpO1xuXG5jb25zdCBhdmF0YXJTdWJtaXRCdXR0b24gPSBhdmF0YXJGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcblxubGV0IHNlbGVjdGVkQ2FyZDtcbmxldCBzZWxlY3RlZENhcmRJZDtcblxuY29uc3QgbmV3UG9zdFN1Ym1pdEJ1dHRvbiA9XG4gIG5ld1Bvc3RGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcblxuY29uc3QgbW9kYWxzTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKSk7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjNhNmVlNTY2LTY4MDYtNDljMS1iMmQ1LWY4YzI5MWEzNGRlN1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbY2FyZHMsIHVzZXJdKSA9PiB7XG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY2FyZHNMaXN0RWxlbWVudC5hcHBlbmQoZ2V0Q2FyZEVsZW1lbnREYXRhKGNhcmQpKTtcbiAgICB9KTtcbiAgICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyLm5hbWU7XG4gICAgcHJvZmlsZUpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyLmFib3V0O1xuICAgIHByb2ZpbGVJbWcuc3JjID0gdXNlci5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PSBcIkVzY2FwZVwiKSB7XG4gICAgbW9kYWxzTGlzdC5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICAgICAgaWYgKG1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgICBoYW5kbGVDbG9zZU1vZGFsKG1vZGFsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmFibGVFc2MoKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVFc2MoKSB7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBlbmFibGVFc2MoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkaXNhYmxlRXNjKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gYXBpXG4gICAgICAuZWRpdFVzZXJJbmZvKHsgbmFtZTogbmFtZUlucHV0LnZhbHVlLCBhYm91dDogam9iSW5wdXQudmFsdWUgfSlcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgICAgICBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xuICAgICAgICBoYW5kbGVDbG9zZU1vZGFsKHByb2ZpbGVGb3JtRWxlbWVudCk7XG4gICAgICB9KTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RTdWJtaXQoZXZ0KSB7XG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xuICAgIHJldHVybiBhcGkucG9zdE5ld0NhcmQoY2FwdGlvbklucHV0LnZhbHVlLCBsaW5rSW5wdXQudmFsdWUpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudERhdGEocmVzKTtcbiAgICAgIGNhcmRzTGlzdEVsZW1lbnQucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgICAgIGhhbmRsZUNsb3NlTW9kYWwobmV3UG9zdEZvcm1FbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Ym1pdChldnQpIHtcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIGFwaS5lZGl0VXNlckF2YXRhcihhdmF0YXJJbnB1dC52YWx1ZSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUltZy5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICAgIGhhbmRsZUNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpO1xuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICAgICAgZGlzYWJsZUJ1dHRvbihhdmF0YXJTdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGV2dCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldnQpIHtcbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIGFwaS5yZW1vdmVDYXJkKHNlbGVjdGVkQ2FyZElkKS50aGVuKCgpID0+IHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcbiAgICAgIGhhbmRsZUNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xuICAgIH0pO1xuICB9XG4gIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgZXZ0LCBcIkRlbGV0aW5nLi4uXCIpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKSB7XG4gIHNlbGVjdGVkQ2FyZCA9IGNhcmRFbGVtZW50O1xuICBzZWxlY3RlZENhcmRJZCA9IGRhdGEuX2lkO1xuICBoYW5kbGVPcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZEVsZW1lbnQsIGJ0bkVsZW1lbnQsIGRhdGEpIHtcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XG4gIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XG4gIGxldCBzZWxlY3RlZEJ0biA9IGJ0bkVsZW1lbnQ7XG5cbiAgaWYgKCFzZWxlY3RlZEJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKSkge1xuICAgIGFwaVxuICAgICAgLmxpa2VDYXJkKHNlbGVjdGVkQ2FyZElkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBzZWxlY3RlZEJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlTGlrZShzZWxlY3RlZENhcmRJZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgc2VsZWN0ZWRCdG4uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50RGF0YShkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRUaXRsZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgY2FyZEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsZW1lbnQuYWx0ID0gYCR7ZGF0YS5uYW1lfSBwaWNgO1xuICBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuXG4gIGlmIChkYXRhLmlzTGlrZWQpIHtcbiAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gIH1cblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhhbmRsZUxpa2VDbGljayhjYXJkRWxlbWVudCwgY2FyZExpa2VCdXR0b24sIGRhdGEpO1xuICB9KTtcbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKVxuICApO1xuICBjYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlRWxlbWVudC5zcmMgPSBjYXJkSW1hZ2VFbGVtZW50LnNyYztcbiAgICBwcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGAke2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnR9IHBpY2A7XG4gICAgcHJldmlld0NhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50O1xuICAgIGhhbmRsZU9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHNldE1vZGFsQ2xvc2VMaXN0ZW5lcnMoKSB7XG4gIG1vZGFsc0xpc3QuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQgPT0gbW9kYWwpIHtcbiAgICAgICAgaGFuZGxlQ2xvc2VNb2RhbChtb2RhbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRDbG9zZUJ1dHRvbkxpc3RlbmVycygpIHtcbiAgY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuICBjbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgY29uc3QgcG9wdXAgPSBidXR0b24uY2xvc2VzdChcIi5tb2RhbFwiKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhbmRsZUNsb3NlTW9kYWwocG9wdXApKTtcbiAgfSk7XG59XG5cbnNldE1vZGFsQ2xvc2VMaXN0ZW5lcnMoKTtcbnNldENsb3NlQnV0dG9uTGlzdGVuZXJzKCk7XG5cbmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlT3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGhhbmRsZU9wZW5Nb2RhbChwcm9maWxlRm9ybUVsZW1lbnQpO1xuICByZXNldFZhbGlkYXRpb24ocHJvZmlsZUZvcm1FbGVtZW50LCBbbmFtZUlucHV0LCBqb2JJbnB1dF0sIHNldHRpbmdzKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xufSk7XG5cbnByb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxubmV3UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBoYW5kbGVPcGVuTW9kYWwobmV3UG9zdEZvcm1FbGVtZW50KTtcbn0pO1xuXG5jYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgaGFuZGxlQ2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG59KTtcblxubmV3UG9zdEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlTmV3UG9zdFN1Ym1pdCk7XG5cbmRlbGV0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVTdWJtaXQpO1xuXG5hdmF0YXJGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhclN1Ym1pdCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2VcbiAgICApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlXG4gICAgKTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHBvc3ROZXdDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZWRpdFVzZXJBdmF0YXIodXJsKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiB1cmwsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwiZXJyb3JFbGVtZW50SWQiLCJpZCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsImRpc2FibGVCdXR0b24iLCJidXR0b25FbGVtZW50IiwiYWRkIiwiZGlzYWJsZWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZW5hYmxlQnV0dG9uIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJsb2FkaW5nVGV4dCIsImhhbmRsZVN1Ym1pdCIsInJlcXVlc3QiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ1dHRvbiIsInN1Ym1pdHRlciIsImluaXRpYWxUZXh0IiwidGhlbiIsInRhcmdldCIsInJlc2V0IiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsImhlYWRlclNyYyIsInByb2ZpbGVJbWciLCJlZGl0UHJvZmlsZVNyYyIsIm5ld1Byb2ZpbGVTcmMiLCJlZGl0QnV0dG9uIiwiZWRpdEF2YXRhclNyYyIsImVkaXRBdmF0YXJCdXR0b24iLCJwcm9maWxlRm9ybUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVKb2JFbGVtZW50IiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0RWxlbWVudCIsIm5ld1Byb2ZpbGVCdXR0b24iLCJuZXdQb3N0Rm9ybUVsZW1lbnQiLCJsaW5rSW5wdXQiLCJjYXB0aW9uSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3SW1hZ2VFbGVtZW50IiwicHJldmlld0NhcHRpb24iLCJkZWxldGVNb2RhbCIsImRlbGV0ZUZvcm0iLCJmb3JtcyIsImNhbmNlbEJ1dHRvbiIsImF2YXRhck1vZGFsIiwiYXZhdGFyRm9ybUVsZW1lbnQiLCJhdmF0YXJJbnB1dCIsImF2YXRhclN1Ym1pdEJ1dHRvbiIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwibmV3UG9zdFN1Ym1pdEJ1dHRvbiIsIm1vZGFsc0xpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYXBpIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEFwcEluZm8iLCJQcm9taXNlIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3ROZXdDYXJkIiwibGluayIsInJlbW92ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInJlbW92ZUxpa2UiLCJlZGl0VXNlckF2YXRhciIsInVybCIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJoYW5kbGVFc2NhcGUiLCJrZXkiLCJmb3JFYWNoIiwibW9kYWwiLCJjb250YWlucyIsImhhbmRsZUNsb3NlTW9kYWwiLCJoYW5kbGVPcGVuTW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENhcmRFbGVtZW50RGF0YSIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2VFbGVtZW50IiwiY2FyZFRpdGxlRWxlbWVudCIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsImFsdCIsImlzTGlrZWQiLCJidG5FbGVtZW50IiwiX2lkIiwic2VsZWN0ZWRCdG4iLCJlcnIiLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkIiwiY2FyZHMiLCJ1c2VyIiwiY2FyZCIsImFwcGVuZCIsInBvcHVwIiwiY2xvc2VzdCIsInZhbHVlIiwidXNlckRhdGEiLCJwcmVwZW5kIiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==